/**
 * headless-calendar-fns v0.0.1
 * Copyright 2018-2022 Nick Graffis <hi@nickgraffis.me>
 */

"use strict";const e=Object.assign||function(e){for(var n,t=1;t<arguments.length;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e};var n;function t(t,r,u,a,o){void 0===a&&(a={includeWeeks:!0,includeDays:!0,includeHours:!0,includeMinutes:!0});for(var s=[],w=function(w){var c=function(e,n,t,r){var i=new Date(r,t,1).getDay();return new Date(r,t,7*e+n-(0===i?6:i-1))}(t,w,r,u),l={};null==o||o.forEach((function(t){t.views.includes(n.day)&&(l=e(e({},t.fn(c)),l))})),s.push(e(e(e({},(null==a?void 0:a.includeHours)&&{hours:i(c,a,o)}),{date:c.toISOString().split("T")[0],isToday:c.getDate()===(new Date).getDate()&&c.getMonth()===(new Date).getMonth()&&c.getFullYear()===(new Date).getFullYear(),isWeekend:0===c.getDay()||6===c.getDay(),day:c.getDay(),week:t,month:r,year:u}),l))},c=0;c<7;c++)w(c);return s}function r(t,r,i){for(var u=[],a=function(a){var o=new Date(r.getTime());o.setHours(t,a);var s={};null==i||i.forEach((function(t){t.views.includes(n.minute)&&(s=e(e({},t.fn(o)),s))})),u.push(e({unix:o.getTime(),minute:a,hour:t,day:o.getDate(),month:o.getMonth(),year:o.getFullYear(),isCurrentMinute:o.getMinutes()===(new Date).getMinutes()},s))},o=0;o<60;o++)a(o);return u}function i(t,i,u){void 0===i&&(i={includeWeeks:!0,includeDays:!0,includeHours:!0,includeMinutes:!0});for(var a=[],o=function(o){var s={};null==u||u.forEach((function(r){r.views.includes(n.hour)&&(s=e(e({},r.fn(new Date(t.getFullYear(),t.getMonth(),t.getDate(),o))),s))}));var w=e(e(e({unix:Math.floor((t.getTime()+60*o*60*1e3)/1e3)},(null==i?void 0:i.includeMinutes)&&{minutes:r(o,t,u)}),{hour:o,day:t.getDate(),month:t.getMonth(),year:t.getFullYear(),isCurrentHour:t.getHours()===(new Date).getHours()}),s);a.push(w)},s=0;s<24;s++)o(s);return a}function u(r,i,u,a){void 0===u&&(u={includeWeeks:!0,includeDays:!0,includeHours:!0,includeMinutes:!0});for(var o=[],s=function(e,n){var t=new Date(n,e,1).getDay(),r=new Date(n,e+1,0).getDate();return Math.ceil((r+t)/7)}(r,i),w=function(s){var w={};null==a||a.forEach((function(t){t.views.includes(n.week)&&(w=e(e({},t.fn(new Date(i,r),s)),w))})),o.push(e(e(e({},u.includeDays&&{days:t(s,r,i,u,a)}),{week:s,year:i,month:r}),w))},c=0;c<s;c++)w(c);return o}function a(t,r,i){void 0===r&&(r={includeWeeks:!0,includeDays:!0,includeHours:!0,includeMinutes:!0});for(var a=[],o=function(o){var s={};null==i||i.forEach((function(r){r.views.includes(n.month)&&(s=e(e({},r.fn(new Date(t,o))),s))})),a.push(e(e(e({},r.includeWeeks&&{weeks:u(o,t,r,i)}),{month:o,year:t}),s))},s=0;s<12;s++)o(s);return a}!function(e){e.year="year",e.month="month",e.week="week",e.day="day",e.hour="hour",e.minute="minute"}(n||(n={})),module.exports=function(e){var o=e.view,s=e.year,w=e.month,c=e.week,l=e.day,d=e.hour,h=e.plugins;switch(e.includeWeeks=e.includeWeeks||!0,e.includeDays=e.includeDays||!0,e.includeHours=e.includeHours||!1,e.includeMinutes=e.includeMinutes||!1,o){case n.year:return{view:o,current:{view:o,months:a(s,e,h)},prev:{view:o,months:a(s-1,e,h)},next:{view:o,months:a(s+1,e,h)}};case n.month:if(!w||!s)throw new Error("month and year is required, when creating a matrix for month view");return{view:o,current:{view:o,weeks:u(w,s,e,h)},prev:{view:o,weeks:u(w-1,s,e,h)},next:{view:o,weeks:u(w+1,s,e,h)}};case n.week:if(!c||!w||!s)throw new Error("week, month, year is required, when creating a matrix for week view");return{view:o,current:{view:o,days:t(c,w,s,e,h)},prev:{view:o,days:t(c-1,w,s,e,h)},next:{view:o,days:t(c+1,w,s,e,h)}};case n.day:if(!l||!w||!s)throw new Error("day, month, year is required, when creating a matrix for day view");return{view:o,current:{view:o,hours:i(new Date(s,w,l),e,h)},prev:{view:o,hours:i(new Date(s,w,l-1),e,h)},next:{view:o,hours:i(new Date(s,w,l+1),e,h)}};case n.hour:if(!(d&&l&&w&&s))throw new Error("hour, day, month, year is required, when creating a matrix for hour view");return{view:o,current:{view:o,minutes:r(d,new Date(s,w,l),h)},prev:{view:o,minutes:r(d-1,new Date(s,w,l),h)},next:{view:o,minutes:r(d+1,new Date(s,w,l),h)}};default:throw new Error("Invalid view, must be one of: year, month, week, day, hour")}};
