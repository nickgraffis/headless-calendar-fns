var createMatrix=function(){"use strict";function O(a,r){const e=new Date(r,a,1).getDay(),c=new Date(r,a+1,0).getDate();return Math.ceil((c+e)/7)}function S(a,r,t,e){const d=new Date(e,t,1).getDay(),f=d===0?6:d-1,w=a*7+r-f;return new Date(e,t,w)}function D(a,r,t,e,c){var M;const d=[];let f=7,u=0,w=1;e!=null&&e.daysInWeek&&(typeof e.daysInWeek=="number"?f=e.daysInWeek+1:typeof e.daysInWeek=="string"&&(e.daysInWeek==="weekends"?(f=7,u=0,w=6):(f=6,u=1))),e!=null&&e.startOfWeek&&(((e==null?void 0:e.daysInWeek)==="weekends"||(e==null?void 0:e.daysInWeek)==="weekdays")&&console.warn("setting startOfWeek with daysInWeek: weekends or weekdays can have wild results!"),u=e.startOfWeek);let y=e!=null&&e.timeZone?new Date(new Date().toLocaleString("en-US",{timeZone:e.timeZone})):new Date;for(let l=u;l<f;l=l+w){const n=S(a,l,r,t);let v={};c==null||c.forEach(I=>{I.views.includes("day")&&(v={...I.fn(n,I.args),...v})});let h=n.getDay();e!=null&&e.daysOfWeek?Array.isArray(e.daysOfWeek)?h=e.daysOfWeek[n.getDay()]:typeof e.daysOfWeek=="string"&&["long","short","narrow"].includes(e.daysOfWeek)&&(h=n.toLocaleDateString("en-US",{weekday:e.daysOfWeek})):(e.daysOfWeek,h=n.getDay()),d.push({...(e==null?void 0:e.includeHours)&&{hours:m(n,e,c)},date:e!=null&&e.format?new Date(n).toLocaleString(((M=e==null?void 0:e.format)==null?void 0:M.locales)||"en-US",{...e==null?void 0:e.format}):n.toISOString().split("T")[0],isToday:n.getDate()===y.getDate()&&n.getMonth()===y.getMonth()&&n.getFullYear()===y.getFullYear(),isWeekend:n.getDay()===0||n.getDay()===6,day:h,week:a,month:r,year:t,...v})}return d}function k(a,r,t,e){var d;const c=[];for(let f=0;f<60;f++){const u=new Date(r.getTime());u.setHours(a,f);let w={};e==null||e.forEach(y=>{y.views.includes("minute")&&(w={...y.fn(u,y.args),...w})}),c.push({date:t!=null&&t.format?new Date(u).toLocaleString(((d=t==null?void 0:t.format)==null?void 0:d.locales)||"en-US",{...t==null?void 0:t.format}):r.toISOString().split("T")[0],minute:f,hour:a,day:u.getDate(),month:u.getMonth(),year:u.getFullYear(),isCurrentMinute:u.getMinutes()===new Date().getMinutes(),...w})}return c}function m(a,r={includeWeeks:!0,includeDays:!0,includeHours:!0,includeMinutes:!0},t){var f;let e=[],c=0,d=24;r!=null&&r.startOfDay&&(c=r.startOfDay),r!=null&&r.hoursInDay&&(d=c+r.hoursInDay+1);for(let u=c;u<d;u++){let w={};t==null||t.forEach(n=>{n.views.includes("hour")&&(w={...n.fn(new Date(a.getFullYear(),a.getMonth(),a.getDate(),u),n.args),...w})});let y=r!=null&&r.timeZone?new Date(new Date().toLocaleString("en-US",{timeZone:r.timeZone})):new Date,M=u===y.getHours(),l={date:r!=null&&r.format?new Date(a).toLocaleString(((f=r==null?void 0:r.format)==null?void 0:f.locales)||"en-US",{...r==null?void 0:r.format}):a.toISOString().split("T")[0],...(r==null?void 0:r.includeMinutes)&&{minutes:k(u,a,r,t)},hour:u,day:a.getDate(),month:a.getMonth(),year:a.getFullYear(),isCurrentHour:M,...w};e.push(l)}return e}function x(a,r){const e=new Date().getDate(),d=new Date(r,a,1).getDay(),f=e-d;return Math.ceil(f/7)}function W(a,r,t={includeWeeks:!0,includeDays:!0,includeHours:!0,includeMinutes:!0},e){const c=[],d=O(a,r);for(let f=0;f<d;f++){let u={};e==null||e.forEach(w=>{w.views.includes("week")&&(u={...w.fn(new Date(r,a),w.args,f),...u})}),c.push({...t.includeDays&&{days:D(f,a,r,t,e)},week:f,year:r,month:a,isCurrentWeek:f===x(a,r),...u})}return c}function g(a,r,t){const e=[];for(let c=0;c<12;c++){let d={};t==null||t.forEach(f=>{f.views.includes("month")&&(d={...f.fn(new Date(a,c),f.args),...d})}),e.push({...r.includeWeeks&&{weeks:W(c,a,r,t)},month:c,year:a,isCurrentMonth:c===new Date().getMonth(),...d})}return e}function s(a,r,t){let e={};return t==null||t.forEach(c=>{c.views.includes("year")&&(e={...c.fn(new Date(a),c.args),...e})}),{...r.includeMonths&&{months:g(a,r,t)},year:a,isCurrentYear:a===new Date().getFullYear(),...e}}function E(a){var w;const{view:r,year:t,month:e,week:c,day:d,hour:f,plugins:u}=a;if(a.includeMonths=a.includeMonths||!0,a.includeWeeks=a.includeWeeks||!0,a.includeDays=a.includeDays||!0,a.includeHours=a.includeHours||!1,a.includeMinutes=a.includeMinutes||!1,(w=a==null?void 0:a.plugins)!=null&&w.some(y=>y==null?void 0:y.load))for(const y of a.plugins)y.load;switch(r){case"year":return{view:r,prev:{view:"year",year:s(t-1,a,u)},current:{view:"year",year:s(t,a,u)},next:{view:"year",year:s(t+1,a,u)}};case"month":return{view:r,current:{view:r,months:g(t,a,u)},prev:{view:r,months:g(t-1,a,u)},next:{view:r,months:g(t+1,a,u)}};case"week":if(!e&&e!==0||!t)throw new Error("month and year is required, when creating a matrix for month view");return{view:r,current:{view:r,weeks:W(e,t,a,u)},prev:{view:r,weeks:W(e-1,t,a,u)},next:{view:r,weeks:W(e+1,t,a,u)}};case"day":if(!c||!e||!t)throw new Error("week, month, year is required, when creating a matrix for week view");return{view:r,current:{view:r,days:D(c,e,t,a,u)},prev:{view:r,days:D(c-1,e,t,a,u)},next:{view:r,days:D(c+1,e,t,a,u)}};case"hour":if(!d||!e||!t)throw new Error("day, month, year is required, when creating a matrix for day view");return{view:r,current:{view:r,hours:m(new Date(t,e,d),a,u)},prev:{view:r,hours:m(new Date(t,e,d-1),a,u)},next:{view:r,hours:m(new Date(t,e,d+1),a,u)}};case"minute":if(!f||!d||!e||!t)throw new Error("hour, day, month, year is required, when creating a matrix for hour view");return{view:r,current:{view:r,minutes:k(f,new Date(t,e,d),a,u)},prev:{view:r,minutes:k(f-1,new Date(t,e,d),a,u)},next:{view:r,minutes:k(f+1,new Date(t,e,d),a,u)}};default:throw new Error("Invalid view, must be one of: year, month, week, day, hour")}}return E}();
